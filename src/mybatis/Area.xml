<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 연결을 namespace로 한다.(대소문자 구분함) -->
<mapper namespace="Area">

	<!-- 시도 출력 -->
	<select id="sidoList" resultType="Sido">
		select sido_code as code,
		sido_name as name from sido
	</select>

	<select id="sigunguList" resultType="Area"
		parameterType="hashmap">
		select sigungu_code as code, sigungu_name as name, latitude, longitude from
		sigungu where sido_code = #{sido_code} order by sigungu_name
	</select>

	<select id="dongList" resultType="Area" parameterType="hashmap">
		select
		dong_code as code, dong_name as name from dong where sigungu_code =
		#{sigungu_code} order by dong_name
	</select>

	<select id="sigungu" resultType="Sigungu"
		parameterType="hashmap">
		select sigungu_code as code, sigungu_name as name from
		sigungu where sigungu_code = #{sigungu_code}
	</select>

	<select id="dong" resultType="Dong" parameterType="hashmap">
		select
		dong_code as code, dong_name as name from dong where dong_code =
		#{dong_code}
	</select>
	
	<!-- 선택한 동의 시도, 시군구, 동의 이름을 받아온다. -->
	<select id="selectedArea" resultType="SelectedArea" parameterType="hashMap">
		Select
		c.sido_name as si,
		b.sigungu_name as sig,
		a.dong_name as emd
		from dong a,
		sigungu b, sido c
		where c.SIDO_CODE = b.SIDO_CODE
		and
		b.SIGUNGU_CODE =
		(select sigungu_code from dong where dong_code =
		#{dong_code1}) and
		a.DONG_CODE = #{dong_code2}
	</select>
	
	<select id="areaCoordinate" resultType="Area" parameterType="hashMap">
		SELECT latitude, longitude FROM ${areaTable} WHERE ${areaCodeName} = #{areaCode}
	</select>
	
	<select id="allStore" resultType="Area" parameterType="hashMap">
		SELECT * FROM STORE
	</select>
</mapper>